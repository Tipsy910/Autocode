{% extends 'base.html' %}

{% block content %}
<div class="container my-4">
    <div class="card shadow-sm">
        <div class="card-header">
            <h2 class="mb-0">โปรไฟล์ของฉัน</h2>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-8">
                    <dl class="row">
                        <dt class="col-sm-4">ชื่อ-สกุล:</dt>
                        <dd class="col-sm-8">{{ user.get_full_name|default:"-" }}</dd>
                        
                        <dt class="col-sm-4">Email:</dt>
                        <dd class="col-sm-8">{{ user.email }}</dd>

                        <dt class="col-sm-4">ตำแหน่ง:</dt>
                        <dd class="col-sm-8">{{ user.get_role_display }}</dd>

                        <dt class="col-sm-4">รหัสนักศึกษา/บุคลากร:</dt>
                        <dd class="col-sm-8">{{ user.personal_id|default:"-" }}</dd>
                    </dl>
                </div>
                
                <div class="col-md-4 text-center">
                    {% if profile and profile.profile_image %}
                        <img src="{{ profile.profile_image.url }}" alt="Profile Image" class="img-thumbnail rounded-circle mb-3" width="150" height="150" style="object-fit: cover;">
                    {% else %}
                        <svg class="rounded-circle bg-light text-secondary mb-3" width="150" height="150" xmlns="http://www.w3.org/2000/svg" role="img"><rect width="100%" height="100%" fill="#dee2e6"></rect><text x="50%" y="50%" fill="#6c757d" dy=".3em">ไม่มีรูป</text></svg>
                    {% endif %}
                    
                    {% if image_form %}
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="input-group">
                            {{ image_form.profile_image }}
                            <button class="btn btn-outline-primary" type="submit">อัปโหลด</button>
                        </div>
                        <div class="form-text">เลือกไฟล์รูปภาพใหม่เพื่ออัปเดต</div>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}